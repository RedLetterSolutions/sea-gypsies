@page "/mobile/script"
@rendermode InteractiveServer

<PageTitle>The Sea Gypsies - Script</PageTitle>

<div class="viewport">
<div class="script-container">
    <div class="script-background">
        <div class="script-bg-layer" id="scriptBgA"></div>
        <div class="script-bg-layer" id="scriptBgB"></div>
    </div>

    <!-- Placeholder content -->
    <div class="content">
        <h1 style="display:none">Script Library</h1>
    </div>
</div>
</div>

<style>
    html, body, #app {
        height: 100%;
        margin: 0;
        padding: 0;
        background: #000;
        overflow: hidden;
    }

    .viewport {
        position: fixed;
        inset: 0;
        overflow: hidden;
    }

    .script-container {
        position: relative;
        width: 100vw;
        height: 100vh;
        overflow: hidden;
    }

    .script-background {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 1;
    }

    .script-bg-layer {
        position: absolute;
        inset: 0;
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        opacity: 0;
        transition: none;
    }

    .content {
        position: relative;
        z-index: 2;
        min-height: 100%;
        display: grid;
        place-items: center;
        color: #fff;
    }
</style>

@code {
    [Inject] private IJSRuntime JSRuntime { get; set; } = default!;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            try
            {
                await JSRuntime.InvokeVoidAsync("initGalleryBackground", "gallery/backgrounds/mobile_background.jpg");
            }
            catch
            {
                // Ignore JS interop errors
            }
        }
    }
}